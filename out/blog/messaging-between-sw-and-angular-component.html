<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no, user-scalable=1, viewport-fit=cover"/><title>Messaging between Service Worker and Angular component</title><meta name="title" content="Messaging between Service Worker and Angular component"/><meta name="description" content="Most of the time service worker logic and application logic work in isolation, but there will be cases where we need to do pass messages between them. In this post we’ll see how we can do this in an angular application."/><meta name="og:type" content="article"/><meta name="og:url" content="/blog/messaging-between-sw-and-angular-component"/><meta name="og:title" content="Messaging between Service Worker and Angular component"/><meta name="og:description" content="Most of the time service worker logic and application logic work in isolation, but there will be cases where we need to do pass messages between them. In this post we’ll see how we can do this in an angular application."/><meta name="og:image" content="/banners/32.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:url" content="/blog/messaging-between-sw-and-angular-component"/><meta name="twitter:title" content="Messaging between Service Worker and Angular component"/><meta name="twitter:description" content="Most of the time service worker logic and application logic work in isolation, but there will be cases where we need to do pass messages between them. In this post we’ll see how we can do this in an angular application."/><meta name="twitter:image" content="/banners/32.png"/><meta name="twitter:site" content="@krishnaanaril"/><meta name="twitter:creator" content="@krishnaanaril"/><meta name="keywords" content="Service Worker, PWA, Angular"/><meta name="og:article:published_time" content="2021-05-23T00:00:00.000Z"/><meta name="og:article:modified_time" content="2021-05-31T00:00:00.000Z"/><meta name="og:article:author" content="Krishna Mohan A M"/><meta name="og:article:section" content="tech"/><meta name="og:article:tag" content="Service Worker, PWA, Angular"/><meta name="next-head-count" content="23"/><link href="https://unpkg.com/prism-themes@1.6.0/themes/prism-shades-of-purple.css" rel="stylesheet"/><link rel="preload" href="/_next/static/css/fdff2a0c099a589e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/fdff2a0c099a589e.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/_next/static/chunks/main-2b80368ae5a19708.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5292d7052c003bfb.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bid%5D-18dd4f73fcb36357.js" defer=""></script><script src="/_next/static/ddhoHZldoiedI3pqOq8Xh/_buildManifest.js" defer=""></script><script src="/_next/static/ddhoHZldoiedI3pqOq8Xh/_ssgManifest.js" defer=""></script></head><body class="bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-50 px-5 lg:px-0"><div id="__next"><div><nav class="sticky top-0 bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-50 bg-opacity-50 dark:bg-opacity-50 backdrop-blur-lg"><section class="hidden lg:flex flex-row justify-center"><nav><ul class="lg:text-xl lg:flex lg:flex-row"><li class=""><a class="block p-4 cursor-pointer" href="/">Home</a></li><li class="border-b-2 border-gray-700 dark:border-gray-300"><a class="block p-4 cursor-pointer" href="/blogs">Blog</a></li><li class=""><a class="block p-4 cursor-pointer" href="/projects">Projects</a></li><li class=""><a class="block p-4 cursor-pointer" href="/about">About</a></li></ul></nav></section><div class="lg:hidden mr-4 p-4 right-0"><button class="p-2" aria-label="view menu items"><svg class="fill-gray-800 dark:fill-gray-50" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black" width="24px" height="24px"><path d="M0 0h24v24H0z" fill="none"></path><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></button></div></nav><div style="display:none" class="fixed top-0 left-0 bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-50 bg-opacity-50 dark:bg-opacity-50 backdrop-blur-lg block h-screen lg:hidden p-2 w-screen z-1"><div class="bg-gray-100 bg-opacity-100 m-5 p-5 rounded-lg shadow-xl dark:bg-gray-600 dark:text-gray-50"><div class="flex flex-row justify-end"><button class="dark:text-gray-50" aria-label="close menu items"><svg class="fill-current" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"></path><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg></button></div><ul class="list-none"><li class=""><a class="block p-4 cursor-pointer" href="/">Home</a></li><li class="border-b-2 border-gray-700 dark:border-gray-300"><a class="block p-4 cursor-pointer" href="/blogs">Blog</a></li><li class=""><a class="block p-4 cursor-pointer" href="/projects">Projects</a></li><li class=""><a class="block p-4 cursor-pointer" href="/about">About</a></li></ul></div></div><div class="min-h-screen"><article class="bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-50"><div><div aria-label="Blog tags/keywords" class="pt-8 flex flex-row justify-center"><div class="bg-gray-300 dark:bg-gray-700 border border-gray-400 ml-2 mr-2 pb-2 pl-4 pr-4 pt-2 text-sm align-baseline rounded-full">Service Worker</div><div class="bg-gray-300 dark:bg-gray-700 border border-gray-400 ml-2 mr-2 pb-2 pl-4 pr-4 pt-2 text-sm align-baseline rounded-full">PWA</div><div class="bg-gray-300 dark:bg-gray-700 border border-gray-400 ml-2 mr-2 pb-2 pl-4 pr-4 pt-2 text-sm align-baseline rounded-full">Angular</div></div><div class="max-w-screen-lg mx-auto"><h1 class="text-5xl pt-5 pb-5 text-center">Messaging between Service Worker and Angular component</h1></div><div class="flex flex-row justify-center m-5 max-w-screen-sm mx-auto"><time class="text-center text-xl">23 May 2021</time></div></div><div class="prose dark:prose-invert lg:prose-xl md:prose-lg max-w-screen-md mx-auto"><p>Most of the time service worker logic and application logic work in isolation, but there will be cases where we need to pass messages between them. For example we are using background sync and to let the application know that it is complete, we can send a message from service worker and receive it in the application. In this post we’ll see how we can do this in an angular application.</p>
<h2>Prerequisite</h2>
<ol>
<li>Basic understanding of Angular <a href="https://angular.io/guide/what-is-angular">application architecture</a>.</li>
<li>Basic understanding of <a href="https://angular.io/guide/service-worker-intro">PWA</a> and service workers.</li>
<li><a href="https://code.visualstudio.com/download">VS Code</a> and <a href="https://angular.io/cli#installing-angular-cli">@angular/cli</a> installation.</li>
</ol>
<h2>Basic Workflow</h2>
<ul>
<li>On button click we'll create a message with property <code>type</code> and value <code>FROM_APP</code> and send it to the service worker.</li>
<li>In service worker we'll create a event handler to listen to messages and filter messages with type <code>FROM_APP</code>.</li>
<li>From service worker send acknowledgement message back to client with property <code>type</code> and value <code>FROM_SW</code>.</li>
<li>In the angular component receive the acknowledgement and print it to the console.</li>
</ul>
<h2>Send Message from Angular</h2>
<p>To send message from angular we will be using <code>postMessage</code> method of <a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerGlobalScope/message_event">ServiceWorker</a>. <code>postMessage</code> signature is similar to that of <a href="https://developer.mozilla.org/en-US/docs/Web/API/Client/postMessage">Client.postMessage</a>. Unfortunately I couldn't find its documentation in the MDN site.</p>
<div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript">navigator<span class="token punctuation">.</span>serviceWorker<span class="token punctuation">.</span>controller<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'FROM_APP'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<h2>Create event handler to accept message from service worker.</h2>
<p>Here we'll be adding the handler to <a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/message_event">ServicWorkerContainer</a> <code>message</code> event.</p>
<div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript">navigator<span class="token punctuation">.</span>serviceWorker<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>data <span class="token operator">&#x26;&#x26;</span> event<span class="token punctuation">.</span>data<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'FROM_SW'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Message received from SW'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<h2>Receive message in service worker</h2>
<p>In service worker we can create an event handler to the message event that will filter messages with type <code>FROM_APP</code>.</p>
<div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript">self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>data <span class="token operator">&#x26;&#x26;</span> event<span class="token punctuation">.</span>data<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'FROM_APP'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'message received from app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<h2>Send acknowledge to the parent page</h2>
<p>To send acknowledge message we need to identify the last focused tab. We can use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Clients/matchAll">matchAll</a> method for that. This method (Chrome 46/Firefox 54 and later) returns clients in most recently focused order.</p>
<div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript">self<span class="token punctuation">.</span>clients<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>clients<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>clients <span class="token operator">&#x26;&#x26;</span> clients<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//Respond to last focused tab</span>
        clients<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'FROM_SW'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<h2>Conclusion</h2>
<p>Even though service worker communication and its implementation are easy, it is very difficult to get relevant documentation regarding events and available methods. Referring Mozilla documentation is a good start, but it is not complete.  You can also refer '<a href="https://felixgerschau.com/how-to-communicate-with-service-workers/">How to communicate with Service Workers</a>' article written by <a href="https://twitter.com/4xfelix">Felix Gerschau</a> for more information.</p>
</div></article></div><footer class="flex flex-col bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-50"><div class="mt-10"><ul class="flex flex-row justify-between max-w-sm mx-auto pl-4 pr-4"><li class="hover:text-gray-600 dark:hover:text-gray-100"><a href="https://twitter.com/KrishnaAnaril">Twitter</a></li><li><a href="https://krishnamohan.dev/sitemap.xml">Sitemap</a></li><li><a href="https://krishnamohan.dev/feed.xml">RSS</a></li><li><a href="mailto:krishnamohan.a.m@gmail.com">Contact</a></li></ul></div><div class="mx-auto p-5 text-sm"><p>© 2021-present <a class="font-bold" href="https://krishnamohan.dev/">Krishna Mohan A M</a>. All Rights Reserved.</p></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"messaging-between-sw-and-angular-component","meta":{"title":"Messaging between Service Worker and Angular component","description":"Most of the time service worker logic and application logic work in isolation, but there will be cases where we need to do pass messages between them. In this post we’ll see how we can do this in an angular application.","published":true,"publishedAt":"2021-05-23T00:00:00.000Z","updatedAt":"2021-05-31T00:00:00.000Z","category":"tech","image":"banners/32","keywords":["Service Worker","PWA","Angular"],"authors":["Krishna Mohan A M"]},"content":"\u003cp\u003eMost of the time service worker logic and application logic work in isolation, but there will be cases where we need to pass messages between them. For example we are using background sync and to let the application know that it is complete, we can send a message from service worker and receive it in the application. In this post we’ll see how we can do this in an angular application.\u003c/p\u003e\n\u003ch2\u003ePrerequisite\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003eBasic understanding of Angular \u003ca href=\"https://angular.io/guide/what-is-angular\"\u003eapplication architecture\u003c/a\u003e.\u003c/li\u003e\n\u003cli\u003eBasic understanding of \u003ca href=\"https://angular.io/guide/service-worker-intro\"\u003ePWA\u003c/a\u003e and service workers.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://code.visualstudio.com/download\"\u003eVS Code\u003c/a\u003e and \u003ca href=\"https://angular.io/cli#installing-angular-cli\"\u003e@angular/cli\u003c/a\u003e installation.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003eBasic Workflow\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eOn button click we'll create a message with property \u003ccode\u003etype\u003c/code\u003e and value \u003ccode\u003eFROM_APP\u003c/code\u003e and send it to the service worker.\u003c/li\u003e\n\u003cli\u003eIn service worker we'll create a event handler to listen to messages and filter messages with type \u003ccode\u003eFROM_APP\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eFrom service worker send acknowledgement message back to client with property \u003ccode\u003etype\u003c/code\u003e and value \u003ccode\u003eFROM_SW\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eIn the angular component receive the acknowledgement and print it to the console.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eSend Message from Angular\u003c/h2\u003e\n\u003cp\u003eTo send message from angular we will be using \u003ccode\u003epostMessage\u003c/code\u003e method of \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerGlobalScope/message_event\"\u003eServiceWorker\u003c/a\u003e. \u003ccode\u003epostMessage\u003c/code\u003e signature is similar to that of \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/Client/postMessage\"\u003eClient.postMessage\u003c/a\u003e. Unfortunately I couldn't find its documentation in the MDN site.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-typescript\"\u003e\u003ccode class=\"language-typescript\"\u003enavigator\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eserviceWorker\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003econtroller\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epostMessage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    type\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'FROM_APP'\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2\u003eCreate event handler to accept message from service worker.\u003c/h2\u003e\n\u003cp\u003eHere we'll be adding the handler to \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/message_event\"\u003eServicWorkerContainer\u003c/a\u003e \u003ccode\u003emessage\u003c/code\u003e event.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-typescript\"\u003e\u003ccode class=\"language-typescript\"\u003enavigator\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eserviceWorker\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function-variable function\"\u003eonmessage\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eevent\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eevent\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edata \u003cspan class=\"token operator\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e event\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edata\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003etype \u003cspan class=\"token operator\"\u003e===\u003c/span\u003e \u003cspan class=\"token string\"\u003e'FROM_SW'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token builtin\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'Message received from SW'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2\u003eReceive message in service worker\u003c/h2\u003e\n\u003cp\u003eIn service worker we can create an event handler to the message event that will filter messages with type \u003ccode\u003eFROM_APP\u003c/code\u003e.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-typescript\"\u003e\u003ccode class=\"language-typescript\"\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eaddEventListener\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'message'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eevent\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eevent\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edata \u003cspan class=\"token operator\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e event\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edata\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003etype \u003cspan class=\"token operator\"\u003e===\u003c/span\u003e \u003cspan class=\"token string\"\u003e'FROM_APP'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token builtin\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'message received from app'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e                   \n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2\u003eSend acknowledge to the parent page\u003c/h2\u003e\n\u003cp\u003eTo send acknowledge message we need to identify the last focused tab. We can use the \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/Clients/matchAll\"\u003ematchAll\u003c/a\u003e method for that. This method (Chrome 46/Firefox 54 and later) returns clients in most recently focused order.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-typescript\"\u003e\u003ccode class=\"language-typescript\"\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eclients\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ematchAll\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ethen\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eclients\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eclients \u003cspan class=\"token operator\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e clients\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003elength\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token comment\"\u003e//Respond to last focused tab\u003c/span\u003e\n        clients\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epostMessage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e type\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'FROM_SW'\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eEven though service worker communication and its implementation are easy, it is very difficult to get relevant documentation regarding events and available methods. Referring Mozilla documentation is a good start, but it is not complete.  You can also refer '\u003ca href=\"https://felixgerschau.com/how-to-communicate-with-service-workers/\"\u003eHow to communicate with Service Workers\u003c/a\u003e' article written by \u003ca href=\"https://twitter.com/4xfelix\"\u003eFelix Gerschau\u003c/a\u003e for more information.\u003c/p\u003e\n"},"__N_SSG":true},"page":"/blog/[id]","query":{"id":"messaging-between-sw-and-angular-component"},"buildId":"ddhoHZldoiedI3pqOq8Xh","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>