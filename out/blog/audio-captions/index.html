<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no, user-scalable=1, viewport-fit=cover"/><title>A failed app idea and some new learnings | Krishna Mohan A M</title><meta name="title" content="A failed app idea and some new learnings"/><meta name="description" content="If we could generate transcript files offline, how can we integrate it with audio files. I was thinking about something similar to external subtitle files used in video players. Came to know that it is possible with the help of TextTracks and WebVTT format. I did a small POC and it went well."/><meta name="og:type" content="article"/><meta name="og:url" content="/blog/audio-captions"/><meta name="og:title" content="A failed app idea and some new learnings"/><meta name="og:description" content="If we could generate transcript files offline, how can we integrate it with audio files. I was thinking about something similar to external subtitle files used in video players. Came to know that it is possible with the help of TextTracks and WebVTT format. I did a small POC and it went well."/><meta name="og:image" content="https://krishnamohan.dev/banners/70.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:url" content="/blog/audio-captions"/><meta name="twitter:title" content="A failed app idea and some new learnings"/><meta name="twitter:description" content="If we could generate transcript files offline, how can we integrate it with audio files. I was thinking about something similar to external subtitle files used in video players. Came to know that it is possible with the help of TextTracks and WebVTT format. I did a small POC and it went well."/><meta name="twitter:image" content="https://krishnamohan.dev/banners/70.png"/><meta name="twitter:site" content="@krishnaanaril"/><meta name="twitter:creator" content="@krishnaanaril"/><meta name="keywords" content="web, javascript, audio"/><meta name="og:article:published_time" content="2023-03-05T00:00:00.000Z"/><meta name="og:article:modified_time" content="2023-03-05T00:00:00.000Z"/><meta name="og:article:author" content="Krishna Mohan A M"/><meta name="og:article:section" content="tech"/><meta name="og:article:tag" content="web, javascript, audio"/><meta name="next-head-count" content="23"/><link href="https://unpkg.com/prism-themes@1.6.0/themes/prism-shades-of-purple.css" rel="stylesheet"/><link rel="preload" href="/_next/static/css/4c58d0963c75419a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4c58d0963c75419a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-3653f441c4a2aa8a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-e1cb0d25eaeaa056.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bid%5D-911bf6dd096ab7ef.js" defer=""></script><script src="/_next/static/AbK2fZDOwBXbtvJr1g3lN/_buildManifest.js" defer=""></script><script src="/_next/static/AbK2fZDOwBXbtvJr1g3lN/_ssgManifest.js" defer=""></script></head><body class="bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-50 px-5 lg:px-0"><div id="__next"><div><nav class="sticky top-0 bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-50 bg-opacity-50 dark:bg-opacity-50 backdrop-blur-lg"><section class="hidden lg:flex flex-row justify-center"><nav><ul class="lg:text-xl lg:flex lg:flex-row"><li class=""><a class="block p-4 cursor-pointer" href="/">Home</a></li><li class="border-b-2 border-gray-700 dark:border-gray-300"><a class="block p-4 cursor-pointer" href="/blogs/">Blog</a></li><li class=""><a class="block p-4 cursor-pointer" href="/projects/">Projects</a></li><li class=""><a class="block p-4 cursor-pointer" href="/about/">About</a></li></ul></nav></section><div class="lg:hidden mr-4 py-4 right-0"><button class="p-2" aria-label="view menu items"><svg class="fill-gray-800 dark:fill-gray-50" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black" width="24px" height="24px"><path d="M0 0h24v24H0z" fill="none"></path><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></button></div></nav><div style="display:none" class="fixed top-0 left-0 bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-50 bg-opacity-50 dark:bg-opacity-50 backdrop-blur-lg block h-screen lg:hidden p-2 w-screen z-1"><div class="bg-gray-100 bg-opacity-100 m-5 p-5 rounded-lg shadow-xl dark:bg-gray-600 dark:text-gray-50"><div class="flex flex-row justify-end"><button class="dark:text-gray-50" aria-label="close menu items"><svg class="fill-current" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"></path><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg></button></div><ul class="list-none"><li class=""><a class="block p-4 cursor-pointer" href="/">Home</a></li><li class="border-b-2 border-gray-700 dark:border-gray-300"><a class="block p-4 cursor-pointer" href="/blogs/">Blog</a></li><li class=""><a class="block p-4 cursor-pointer" href="/projects/">Projects</a></li><li class=""><a class="block p-4 cursor-pointer" href="/about/">About</a></li></ul></div></div><div class="min-h-screen"><article class="bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-50"><div><div aria-label="Blog tags/keywords" class="pt-8 flex flex-row justify-center"><a class="bg-gray-300 dark:bg-gray-700 border border-gray-400 ml-2 mr-2 pb-2 pl-4 pr-4 pt-2 text-sm align-baseline rounded-full" href="/blogs/tag/web/">web</a><a class="bg-gray-300 dark:bg-gray-700 border border-gray-400 ml-2 mr-2 pb-2 pl-4 pr-4 pt-2 text-sm align-baseline rounded-full" href="/blogs/tag/javascript/">javascript</a><a class="bg-gray-300 dark:bg-gray-700 border border-gray-400 ml-2 mr-2 pb-2 pl-4 pr-4 pt-2 text-sm align-baseline rounded-full" href="/blogs/tag/audio/">audio</a></div><div class="max-w-screen-lg mx-auto"><h1 class="text-5xl font-bold pt-5 pb-5 text-center">A failed app idea and some new learnings</h1></div><div class="flex flex-row justify-center m-5 max-w-screen-sm mx-auto"><time class="text-center text-xl">5 March 2023</time></div></div><div class="prose dark:prose-invert lg:prose-xl md:prose-lg max-w-screen-md mx-auto"><p>Last week while browsing hacker news, I came across a discussion on <a href="https://news.ycombinator.com/item?id=34793116">Spotify and podcasts</a>. There i saw few features users requested in podcasts app and thought of creating a new one to address few of those feature requests. Among those, the major feature i liked and want to implement was the transcript feature. I really liked the concept of showing captions/subtitles similar to music lyrics in Spotify app.</p>
<p>At first I thought of using <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API">Web Speech API</a> to convert audio to text, and wondered why nobody is using the same. Well I know the reason now, we <a href="https://wicg.github.io/speech-api/#issue-2c77f5e1">cannot feed any stream</a> to the recognition service. It works only with user agent controlled input device.</p>
<h2>Workaround</h2>
<p>I was devastated for some time. Then i thought, if we could generate transcript files offline, how can we integrate it with audio files. I was thinking about something similar to external subtitle files used in video players. Came to know that it is possible with the help of <a href="https://developer.mozilla.org/en-US/docs/Web/API/TextTrack">TextTracks</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebVTT_API">WebVTT format</a>. I did a small POC and it went well.</p>
<h2>Code</h2>
<p>Here is the audio html tag with multiple text tracks.</p>
<div class="remark-highlight"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>audio</span> 
    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>podcast_audio<span class="token punctuation">"</span></span> 
    <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sounds/podcast_sample.mp3<span class="token punctuation">"</span></span> 
    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>px-2 w-full<span class="token punctuation">"</span></span>
    <span class="token attr-name">controls</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sounds/podcast_sample.mp3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        Download <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>audio</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>audio</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>a</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>track</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>caption_en<span class="token punctuation">"</span></span> <span class="token attr-name">default</span> <span class="token attr-name">kind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>captions<span class="token punctuation">"</span></span> <span class="token attr-name">srclang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sounds/podcast_sample.vtt<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>track</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>subtitle_de<span class="token punctuation">"</span></span><span class="token attr-name">"</span> <span class="token attr-name">default</span> <span class="token attr-name">kind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>subtitles<span class="token punctuation">"</span></span> <span class="token attr-name">srclang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>de<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sounds/podcast_sample_02.vtt<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>audio</span><span class="token punctuation">></span></span>  
</code></pre></div>
<p>We need to add some javascript code to render captions as audio tag do not have rendering space. This is not required for video elements</p>
<div class="remark-highlight"><pre class="language-javascript"><code class="language-javascript"><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> textTracks <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'podcast_audio'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">textTracks</span><span class="token punctuation">;</span>        
    <span class="token keyword">var</span> activeTextTrack <span class="token operator">=</span> <span class="token function">getActiveTextTrack</span><span class="token punctuation">(</span>textTracks<span class="token punctuation">)</span><span class="token punctuation">;</span>
    textTracks<span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onchange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>            
        activeTextTrack <span class="token operator">=</span> <span class="token function">getActiveTextTrack</span><span class="token punctuation">(</span>textTracks<span class="token punctuation">)</span><span class="token punctuation">;</span>            
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> enTrack <span class="token operator">=</span> textTracks<span class="token punctuation">.</span><span class="token method function property-access">getTrackById</span><span class="token punctuation">(</span><span class="token string">'caption_en'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        
<span class="token punctuation">}</span>

<span class="token comment">/*</span>
<span class="token comment">Method to get active text track. Active track depends on the user</span>
<span class="token comment">*/</span>
<span class="token keyword">function</span> <span class="token function">getActiveTextTrack</span><span class="token punctuation">(</span><span class="token parameter">textTracks</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> activeTextTrack<span class="token punctuation">;</span>
    <span class="token keyword control-flow">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> track <span class="token keyword">of</span> textTracks<span class="token punctuation">)</span> <span class="token punctuation">{</span>            
        <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>track<span class="token punctuation">.</span><span class="token property-access">mode</span> <span class="token operator">==</span> <span class="token string">'showing'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            activeTextTrack <span class="token operator">=</span> track<span class="token punctuation">;</span>
            <span class="token keyword control-flow">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>activeTextTrack<span class="token punctuation">)</span> <span class="token punctuation">{</span>            
        activeTextTrack<span class="token punctuation">.</span><span class="token property-access">oncuechange</span> <span class="token operator">=</span> onCueChange<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">return</span> activeTextTrack<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">onCueChange</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        
    <span class="token keyword">const</span> captionSpan <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'audio_caption'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> cueText <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> activeCue <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">activeCues</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cueText <span class="token operator">+=</span> <span class="token string">"\n"</span><span class="token operator">+</span>activeCue<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    captionSpan<span class="token punctuation">.</span><span class="token property-access">innerText</span> <span class="token operator">=</span> cueText<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>Text file for caption.</p>
<div class="remark-highlight"><pre class="language-vtt"><code class="language-vtt">WEBVTT - podcast_sample.vtt

00:01.000 --&#x26;gt; 00:04.000
- Never drink liquid nitrogen.

00:05.000 --&#x26;gt; 00:09.000
- It will perforate your stomach.
- You could die.

00:07.000 --&#x26;gt; 00:13.000
- This is an overlapping caption
- Will it work?</code></pre></div>
<p>Text file for subtitle.</p>
<div class="remark-highlight"><pre class="language-vtt"><code class="language-vtt">WEBVTT - podcast_sample_02.vtt

NOTE
This is a sample note/comment

1
00:01.000 --&#x26;gt; 00:04.000
- Ta en kopp varmt te.
- Det är inte varmt.

2
00:05.000 --&#x26;gt; 00:09.000
- Har en kopp te.
- Det smakar som te.

NOTE This last line may not translate well.

3
00:10.000 --&#x26;gt; 00:15.000
- Ta en kopp</code></pre></div>
<h2>What's Next</h2>
<p>Need to work on how to generate transcripts from audio files. As of now my understanding is that we need to use some cloud services for it. Also I want to learn more about</p>
<h2>References</h2>
<ul>
<li><a href="https://stackoverflow.com/a/54663735/1520750">Stackoverflow answer</a></li>
</ul>
</div></article></div><footer class="flex flex-col bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-50"><div class="mt-10"><ul class="flex flex-row justify-between max-w-sm mx-auto pl-4 pr-4"><li class="hover:text-gray-600 dark:hover:text-gray-100"><a href="https://twitter.com/KrishnaAnaril">Twitter</a></li><li><a href="https://krishnamohan.dev/sitemap.xml">Sitemap</a></li><li><a href="https://krishnamohan.dev/rss.xml">RSS</a></li><li><a href="mailto:krishnamohan.a.m@gmail.com">Contact</a></li></ul></div><div class="mx-auto p-5 text-sm"><p>© 2021-present <a class="font-bold" href="https://krishnamohan.dev/">Krishna Mohan A M</a>. All Rights Reserved.</p></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"audio-captions","meta":{"title":"A failed app idea and some new learnings","description":"If we could generate transcript files offline, how can we integrate it with audio files. I was thinking about something similar to external subtitle files used in video players. Came to know that it is possible with the help of TextTracks and WebVTT format. I did a small POC and it went well.","published":true,"publishedAt":"2023-03-05T00:00:00.000Z","updatedAt":"2023-03-05T00:00:00.000Z","category":"tech","image":"banners/70","keywords":["web","javascript","audio"],"authors":["Krishna Mohan A M"]},"content":"\u003cp\u003eLast week while browsing hacker news, I came across a discussion on \u003ca href=\"https://news.ycombinator.com/item?id=34793116\"\u003eSpotify and podcasts\u003c/a\u003e. There i saw few features users requested in podcasts app and thought of creating a new one to address few of those feature requests. Among those, the major feature i liked and want to implement was the transcript feature. I really liked the concept of showing captions/subtitles similar to music lyrics in Spotify app.\u003c/p\u003e\n\u003cp\u003eAt first I thought of using \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API\"\u003eWeb Speech API\u003c/a\u003e to convert audio to text, and wondered why nobody is using the same. Well I know the reason now, we \u003ca href=\"https://wicg.github.io/speech-api/#issue-2c77f5e1\"\u003ecannot feed any stream\u003c/a\u003e to the recognition service. It works only with user agent controlled input device.\u003c/p\u003e\n\u003ch2\u003eWorkaround\u003c/h2\u003e\n\u003cp\u003eI was devastated for some time. Then i thought, if we could generate transcript files offline, how can we integrate it with audio files. I was thinking about something similar to external subtitle files used in video players. Came to know that it is possible with the help of \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/TextTrack\"\u003eTextTracks\u003c/a\u003e and \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebVTT_API\"\u003eWebVTT format\u003c/a\u003e. I did a small POC and it went well.\u003c/p\u003e\n\u003ch2\u003eCode\u003c/h2\u003e\n\u003cp\u003eHere is the audio html tag with multiple text tracks.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eaudio\u003c/span\u003e \n    \u003cspan class=\"token attr-name\"\u003eid\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003epodcast_audio\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \n    \u003cspan class=\"token attr-name\"\u003esrc\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003esounds/podcast_sample.mp3\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \n    \u003cspan class=\"token attr-name\"\u003eclass\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003epx-2 w-full\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token attr-name\"\u003econtrols\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ea\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ehref\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003esounds/podcast_sample.mp3\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n        Download \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eaudio\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003esrc\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003eaudio\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ea\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003etrack\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eid\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003ecaption_en\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003edefault\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ekind\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003ecaptions\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003esrclang\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003een\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003esrc\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003esounds/podcast_sample.vtt\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003etrack\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eid\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003esubtitle_de\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token attr-name\"\u003e\"\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003edefault\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ekind\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003esubtitles\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003esrclang\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003ede\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003esrc\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003esounds/podcast_sample_02.vtt\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003eaudio\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e  \n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eWe need to add some javascript code to render captions as audio tag do not have rendering space. This is not required for video elements\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"token dom variable\"\u003ewindow\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method-variable function-variable method function property-access\"\u003eonload\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e textTracks \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token dom variable\"\u003edocument\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003egetElementById\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'podcast_audio'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003etextTracks\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e        \n    \u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e activeTextTrack \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003egetActiveTextTrack\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etextTracks\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    textTracks\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method-variable function-variable method function property-access\"\u003eonchange\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003eevent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e            \n        activeTextTrack \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003egetActiveTextTrack\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etextTracks\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e            \n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e enTrack \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e textTracks\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003egetTrackById\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'caption_en'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e        \n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e/*\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003eMethod to get active text track. Active track depends on the user\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e*/\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003egetActiveTextTrack\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003etextTracks\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e activeTextTrack\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword control-flow\"\u003efor\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e track \u003cspan class=\"token keyword\"\u003eof\u003c/span\u003e textTracks\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e            \n        \u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etrack\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003emode\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token string\"\u003e'showing'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            activeTextTrack \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e track\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"token keyword control-flow\"\u003ebreak\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eactiveTextTrack\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e            \n        activeTextTrack\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eoncuechange\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e onCueChange\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e activeTextTrack\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eonCueChange\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003eevent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e        \n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e captionSpan \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token dom variable\"\u003edocument\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003egetElementById\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'audio_caption'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e cueText \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword control-flow\"\u003efor\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e activeCue \u003cspan class=\"token keyword\"\u003eof\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eactiveCues\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        cueText \u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\\n\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e+\u003c/span\u003eactiveCue\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003etext\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    captionSpan\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003einnerText\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e cueText\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eText file for caption.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-vtt\"\u003e\u003ccode class=\"language-vtt\"\u003eWEBVTT - podcast_sample.vtt\r\n\r\n00:01.000 --\u0026#x26;gt; 00:04.000\r\n- Never drink liquid nitrogen.\r\n\r\n00:05.000 --\u0026#x26;gt; 00:09.000\r\n- It will perforate your stomach.\r\n- You could die.\r\n\r\n00:07.000 --\u0026#x26;gt; 00:13.000\r\n- This is an overlapping caption\r\n- Will it work?\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eText file for subtitle.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-vtt\"\u003e\u003ccode class=\"language-vtt\"\u003eWEBVTT - podcast_sample_02.vtt\r\n\r\nNOTE\r\nThis is a sample note/comment\r\n\r\n1\r\n00:01.000 --\u0026#x26;gt; 00:04.000\r\n- Ta en kopp varmt te.\r\n- Det är inte varmt.\r\n\r\n2\r\n00:05.000 --\u0026#x26;gt; 00:09.000\r\n- Har en kopp te.\r\n- Det smakar som te.\r\n\r\nNOTE This last line may not translate well.\r\n\r\n3\r\n00:10.000 --\u0026#x26;gt; 00:15.000\r\n- Ta en kopp\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2\u003eWhat's Next\u003c/h2\u003e\n\u003cp\u003eNeed to work on how to generate transcripts from audio files. As of now my understanding is that we need to use some cloud services for it. Also I want to learn more about\u003c/p\u003e\n\u003ch2\u003eReferences\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://stackoverflow.com/a/54663735/1520750\"\u003eStackoverflow answer\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n"},"__N_SSG":true},"page":"/blog/[id]","query":{"id":"audio-captions"},"buildId":"AbK2fZDOwBXbtvJr1g3lN","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>