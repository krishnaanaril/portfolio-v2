<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no, user-scalable=no, viewport-fit=cover"/><title>Generating Code Coverage Reports in Dotnet Core</title><meta name="title" content="Generating Code Coverage Reports in Dotnet Core"/><meta name="description" content="Unlike other application frameworks .NET Core do not provide code coverage reports out of the box. Here I’ll be using a different approach which actually suited my web application. Without further ado, let’s get started."/><meta name="og:type" content="article"/><meta name="og:url" content="/blog/generating-code-coverage-reports-in-dotnet-core"/><meta name="og:title" content="Generating Code Coverage Reports in Dotnet Core"/><meta name="og:description" content="Unlike other application frameworks .NET Core do not provide code coverage reports out of the box. Here I’ll be using a different approach which actually suited my web application. Without further ado, let’s get started."/><meta name="og:image" content="banners/04.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:url" content="/blog/generating-code-coverage-reports-in-dotnet-core"/><meta name="twitter:title" content="Generating Code Coverage Reports in Dotnet Core"/><meta name="twitter:description" content="Unlike other application frameworks .NET Core do not provide code coverage reports out of the box. Here I’ll be using a different approach which actually suited my web application. Without further ado, let’s get started."/><meta name="twitter:image" content="banners/04.png"/><meta name="twitter:site" content="@krishnaanaril"/><meta name="twitter:creator" content="@krishnaanaril"/><meta name="keywords" content="dotnet"/><meta name="og:article:published_time" content="2019-07-05T00:00:00.000Z"/><meta name="og:article:modified_time" content="2019-07-05T00:00:00.000Z"/><meta name="og:article:author" content="Krishna Mohan A M"/><meta name="og:article:section" content="tech"/><meta name="og:article:tag" content="dotnet"/><meta name="next-head-count" content="23"/><link href="https://unpkg.com/prism-themes@1.6.0/themes/prism-shades-of-purple.css" rel="stylesheet"/><link rel="preload" href="/_next/static/css/4a2588553a45f461.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4a2588553a45f461.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/_next/static/chunks/main-2b80368ae5a19708.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9065fe795cf13033.js" defer=""></script><script src="/_next/static/chunks/pages/blogs/%5Bid%5D-ee2f0cd279d3564a.js" defer=""></script><script src="/_next/static/PzvC_6guoYsxVyzDyIKoc/_buildManifest.js" defer=""></script><script src="/_next/static/PzvC_6guoYsxVyzDyIKoc/_ssgManifest.js" defer=""></script></head><body class="bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-50 px-5 lg:px-0"><div id="__next"><div><nav class="sticky top-0 text-gray-800 dark:text-gray-50 backdrop-blur-lg mix-blend-multiply dark:mix-blend-color-dodge"><section class="hidden lg:flex flex-row justify-center"><nav><ul class="lg:text-xl lg:flex lg:flex-row"><li class="p-3 cursor-pointer"><a href="/">Home</a></li><li class="p-3 cursor-pointer border-b-2 border-gray-700 dark:border-gray-300"><a href="/blogs">Blog</a></li><li class="p-3 cursor-pointer"><a href="/projects">Projects</a></li><li class="p-3 cursor-pointer"><a href="/about">About</a></li></ul></nav></section><div class="absolute lg:hidden mr-4 p-4 right-0"><button class="p-2" aria-label="view menu items"><svg class="fill-gray-800 dark:fill-gray-50" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black" width="24px" height="24px"><path d="M0 0h24v24H0z" fill="none"></path><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></button></div></nav><div class="min-h-screen"><article class="bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-50"><div><div aria-label="Blog tags/keywords" class="pt-8 flex flex-row justify-center"><div class="bg-gray-300 dark:bg-gray-700 border border-gray-400 ml-2 mr-2 pb-2 pl-4 pr-4 pt-2 text-sm align-baseline rounded-full">dotnet</div></div><div class="max-w-screen-lg mx-auto"><h1 class="text-5xl pt-5 pb-5 text-center">Generating Code Coverage Reports in Dotnet Core</h1></div><div class="flex flex-row justify-center m-5 max-w-screen-sm mx-auto"><time class="text-center text-xl">5 July 2019</time></div></div><div class="prose dark:prose-invert lg:prose-xl md:prose-lg max-w-screen-md mx-auto"><p>Unlike other application frameworks <strong>.NET Core</strong> do not provide code coverage reports out of the box, even the code coverage <a href="https://github.com/microsoft/vstest/issues/981">support </a>was provided only in dotnet core version 2.1. But the ‘<strong>Code Coverage Analysis</strong>’ is provided with Visual Studio Enterprise edition. You can find more information <a href="https://docs.microsoft.com/en-us/visualstudio/test/using-code-coverage-to-determine-how-much-code-is-being-tested?view=vs-2017">here</a>.</p>
<p>That’s okay, we’ve other tools available to get the code coverage reports and here I’ll be briefly explaining about it. There is already a blog post about this <a href="https://gunnarpeipman.com/aspnet/code-coverage/">topic</a> by <a href="https://twitter.com/gpeipman">Gunnar Peipman</a>. You can refer that as well. Here I’ll be using a different approach which actually suited my web application. Without further ado, let’s get started.</p>
<h2>Contents</h2>
<ul>
<li>Prerequisites</li>
<li>Creating dotnet application and adding test project</li>
<li>Running tests with CLI</li>
<li>Convert *.coverage file to *.coveragexml file</li>
<li>Generate Reports using ReportGenerator</li>
<li>Powershell script with all the steps</li>
<li>Conclusion</li>
</ul>
<h2>Prerequisites</h2>
<p>You need to install/Configure:</p>
<ul>
<li>Dotnet core version 2.1 or above.</li>
<li>Visual Studio 2017 or above / Visual studio code.</li>
<li><a href="https://github.com/danielpalme">Daniel Palme</a>’s <a href="https://danielpalme.github.io/ReportGenerator/usage.html">ReportGenerator</a></li>
<li><a href="https://www.nuget.org/packages/Microsoft.CodeCoverage/">Microsoft.CodeCoverage</a></li>
</ul>
<h2>Creating dotnet application and adding test project</h2>
<p>You can make use of <em>dotnet new</em> command or Visual Studio templates for creating a new project and test project. Here I’ll be covering MSTest, you can try with another unit testing framework as well.</p>
<p>If you’ve a dotnet core application with version 1.x, you can do the following steps to get the code coverage.</p>
<p>• Upgraded test related nuget refernces to latest version</p>
<div class="remark-highlight"><pre class="language-xml"><code class="language-xml">&#x3C;PackageReference Include=”Microsoft.NET.Test.Sdk” Version=”15.9.0" />
&#x3C;PackageReference Include=”MSTest.TestAdapter” Version=”1.3.2" />
 &#x3C;PackageReference Include=”MSTest.TestFramework” Version=”1.3.2" />
</code></pre></div>
<p>• Add the following config in *.csproj files. More information is available <a href="https://github.com/Microsoft/vstest/issues/800">here.</a></p>
<div class="remark-highlight"><pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>DebugType</span><span class="token punctuation">></span></span>Full<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>DebugType</span><span class="token punctuation">></span></span>
</code></pre></div>
<h2>Running tests with CLI</h2>
<p>Once we’ve created our application and added sufficient unit tests. We need to run these tests and get the code coverage info. You do so by running the following command.</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash">dotnet <span class="token builtin class-name">test</span> <span class="token operator">&#x3C;</span>Path to *.csproj file<span class="token operator">></span> --results-directory:<span class="token operator">&#x3C;</span>Test Result directory<span class="token operator">></span> --collect:<span class="token string">"Code Coverage"</span>
</code></pre></div>
<p>But I had a problem, dotnet was analyzing my dependent libraries as well. I was using <a href="https://github.com/moq/moq">Moq </a>for mocking and <a href="https://github.com/MisterJames/GenFu">GenFu</a> to generate random test data. So I had to exclude these dlls during the code coverage analysis by creating a <a href="https://docs.microsoft.com/en-us/visualstudio/test/configure-unit-tests-by-using-a-dot-runsettings-file?view=vs-2019">runsettings</a> file and add the following configuration:</p>
<div class="remark-highlight"><pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>ModulePaths</span><span class="token punctuation">></span></span>              
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>Exclude</span><span class="token punctuation">></span></span>                
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>ModulePath</span><span class="token punctuation">></span></span>.*Moq.dll<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>ModulePath</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>ModulePath</span><span class="token punctuation">></span></span>.*GenFu.dll<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>ModulePath</span><span class="token punctuation">></span></span>                
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>Exclude</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>ModulePaths</span><span class="token punctuation">></span></span>
</code></pre></div>
<p>Include and exclude nodes use regular expressions. More information is available <a href="https://docs.microsoft.com/en-us/visualstudio/test/customizing-code-coverage-analysis?view=vs-2019#regular-expressions">here</a>.</p>
<p>Now we need to run *test *command using this .runsettings file.</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash">dotnet <span class="token builtin class-name">test</span> <span class="token operator">&#x3C;</span>Path to .csproj file<span class="token operator">></span> --settings:<span class="token operator">&#x3C;</span>Path to .runsettings file<span class="token operator">></span>
</code></pre></div>
<p>This will generate *.coverage file inside a folder whose name corresponds to a GUID. Right now dotnet core CLI <a href="https://github.com/microsoft/vstest/issues/1957#issue-420578504">do not support</a> custom name for *.coverage file.</p>
<h2>Convert *.coverage file to *.coveragexml file</h2>
<p>*CodeCoverage.exe *is a tool that comes with the installation of Visual Studio. To generate a coverage report with ReportGenerator the file has to be converted to xml format.</p>
<p>To get the xml file you can use the following command:</p>
<div class="remark-highlight"><pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>UserProfile</span><span class="token punctuation">></span></span>\.nuget\packages\microsoft.codecoverage\<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>version</span><span class="token punctuation">></span></span>\build\netstandard1.0\CodeCoverage\CodeCoverage.exe analyze  /output:<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>xml</span> <span class="token attr-name">file</span> <span class="token attr-name">name</span> <span class="token attr-name">with</span> <span class="token attr-name">Path</span><span class="token punctuation">></span></span>.coveragexml  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>path</span> <span class="token attr-name">to</span> <span class="token attr-name">coverage</span> <span class="token attr-name">file</span><span class="token punctuation">></span></span>

# Eg: C:\Users\krishnamohan\.nuget\packages\microsoft.codecoverage\15.9.0\build\netstandard1.0\CodeCoverage\CodeCoverage.exe analyze  /output:d:\MyTestOutput.coveragexml  d:\SomeName.coverage
</code></pre></div>
<h2>Generate Reports using ReportGenerator</h2>
<p>We need to run another command using the installed ReportGenerator.dll.</p>
<div class="remark-highlight"><pre class="language-shell"><code class="language-shell">dotnet <span class="token operator">&#x3C;</span>UserProfile<span class="token operator">></span><span class="token punctuation">\</span>.nuget<span class="token punctuation">\</span>packages<span class="token punctuation">\</span>reportgenerator<span class="token punctuation">\</span><span class="token operator">&#x3C;</span>version<span class="token operator">></span><span class="token punctuation">\</span>tools<span class="token punctuation">\</span>netcoreapp2.1<span class="token punctuation">\</span>ReportGenerator.dll <span class="token string">"-reports:&#x3C;Coveragexml file path>"</span> <span class="token string">"-targetdir:&#x3C;path to coverage report>"</span>
<span class="token operator">&#x3C;</span><span class="token comment">#</span>
Eg: dotnet C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>krishnamohan<span class="token punctuation">\</span>.nuget<span class="token punctuation">\</span>packages<span class="token punctuation">\</span>reportgenerator<span class="token punctuation">\</span><span class="token number">4.1</span>.10<span class="token punctuation">\</span>tools<span class="token punctuation">\</span>netcoreapp2.1<span class="token punctuation">\</span>ReportGenerator.dll <span class="token string">"-reports:d:\MyTestOutput.coveragexml"</span> <span class="token string">"-targetdir:d:<span title="\c" class="token entity">\c</span>overagereport"</span>
<span class="token comment">#></span>
</code></pre></div>
<p>This will generate reports in *.htm format in the given output folder. If you open the index.htm file you can view the report.</p>
<p><img src="assets/images/03_01.png" alt="Sample Report Image"><em>Sample Report Image. Source: https://github.com/danielpalme/ReportGenerator</em></p>
<h2>Powershell script with all the steps</h2>
<div class="remark-highlight"><pre class="language-powershell"><code class="language-powershell"><span class="token keyword">param</span><span class="token punctuation">(</span>
   <span class="token namespace">[Parameter(Mandatory=$true)]</span>
   <span class="token namespace">[string]</span><span class="token variable">$testProjectPath</span><span class="token punctuation">,</span>
   <span class="token namespace">[Parameter(Mandatory=$true)]</span>
   <span class="token namespace">[string]</span><span class="token variable">$testSettingsPath</span><span class="token punctuation">,</span>
   <span class="token namespace">[Parameter(Mandatory=$true)]</span>
   <span class="token namespace">[string]</span><span class="token variable">$testResultsFolder</span>
<span class="token punctuation">)</span>

<span class="token comment">&#x3C;#</span>
<span class="token comment">echo "Test Project Path" $testProjectPath</span>
<span class="token comment">echo "Test Settings Path" $testSettingsPath</span>
<span class="token comment">echo "Test Results Folder" $testResultsFolder</span>
<span class="token comment">#></span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>

   <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">-not</span> <span class="token punctuation">(</span><span class="token function">Test-Path</span> <span class="token variable">$testProjectPath</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
   <span class="token punctuation">{</span>
       <span class="token keyword">throw</span> <span class="token namespace">[System.IO.FileNotFoundException]</span> <span class="token string">"<span class="token variable">$testProjectPath</span> not found."</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">-not</span> <span class="token punctuation">(</span><span class="token function">Test-Path</span> <span class="token variable">$testSettingsPath</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
   <span class="token punctuation">{</span>
       <span class="token keyword">throw</span> <span class="token namespace">[System.IO.FileNotFoundException]</span> <span class="token string">"<span class="token variable">$testSettingsPath</span> not found."</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">-not</span> <span class="token punctuation">(</span><span class="token function">Test-Path</span> <span class="token variable">$testResultsFolder</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
   <span class="token punctuation">{</span>
       <span class="token keyword">throw</span> <span class="token namespace">[System.IO.FileNotFoundException]</span> <span class="token string">"<span class="token variable">$testResultsFolder</span> not found."</span>
   <span class="token punctuation">}</span>

   dotnet test <span class="token variable">$testProjectPath</span> <span class="token operator">--</span>settings:<span class="token variable">$testSettingsPath</span> 
   <span class="token variable">$recentCoverageFile</span> = <span class="token function">Get-ChildItem</span> <span class="token operator">-</span>File <span class="token operator">-</span><span class="token keyword">Filter</span> <span class="token operator">*</span><span class="token punctuation">.</span>coverage <span class="token operator">-</span>Path <span class="token variable">$testResultsFolder</span> <span class="token operator">-</span>Name <span class="token operator">-</span>Recurse <span class="token punctuation">|</span> <span class="token function">Select-Object</span> <span class="token operator">-</span>First 1<span class="token punctuation">;</span>
   <span class="token function">write-host</span> <span class="token string">'Test Completed'</span>  <span class="token operator">-</span>ForegroundColor Green

   C:\Users\krishnamohan\<span class="token punctuation">.</span>nuget\packages\microsoft<span class="token punctuation">.</span>codecoverage\15<span class="token punctuation">.</span>9<span class="token punctuation">.</span>0\build\netstandard1<span class="token punctuation">.</span>0\CodeCoverage\CodeCoverage<span class="token punctuation">.</span>exe analyze  <span class="token operator">/</span>output:<span class="token variable">$testResultsFolder</span>\MyTestOutput<span class="token punctuation">.</span>coveragexml  <span class="token variable">$testResultsFolder</span><span class="token string">'\'</span><span class="token variable">$recentCoverageFile</span>
   <span class="token function">write-host</span> <span class="token string">'CoverageXML Generated'</span>  <span class="token operator">-</span>ForegroundColor Green

   dotnet C:\Users\krishnamohan\<span class="token punctuation">.</span>nuget\packages\reportgenerator\4<span class="token punctuation">.</span>1<span class="token punctuation">.</span>10\tools\netcoreapp2<span class="token punctuation">.</span>1\ReportGenerator<span class="token punctuation">.</span>dll <span class="token string">"-reports:<span class="token variable">$testResultsFolder</span>\MyTestOutput.coveragexml"</span> <span class="token string">"-targetdir:<span class="token variable">$testResultsFolder</span>\coveragereport"</span>
   <span class="token function">write-host</span> <span class="token string">'CoverageReport Published'</span>  <span class="token operator">-</span>ForegroundColor Green

<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">{</span>

   <span class="token function">write-host</span> <span class="token string">"Caught an exception:"</span> <span class="token operator">-</span>ForegroundColor Red
   <span class="token function">write-host</span> <span class="token string">"Exception Type: <span class="token function">$<span class="token punctuation">(</span><span class="token variable">$_</span><span class="token punctuation">.</span>Exception<span class="token punctuation">.</span>GetType<span class="token punctuation">(</span><span class="token punctuation">)</span></span>.FullName)"</span> <span class="token operator">-</span>ForegroundColor Red
   <span class="token function">write-host</span> <span class="token string">"Exception Message: <span class="token function">$<span class="token punctuation">(</span><span class="token variable">$_</span><span class="token punctuation">.</span>Exception<span class="token punctuation">.</span>Message<span class="token punctuation">)</span></span>"</span> <span class="token operator">-</span>ForegroundColor Red

<span class="token punctuation">}</span>
</code></pre></div>
<h2>Conclusion</h2>
<p>It took some time for me to figure it out as lot of information regarding this was scattered all over the internet. Finally it was worth the effort and coverage reports really improve quality of unit tests and helps developer to write better unit tests. Hope this blog post will be helpful for dotnet developers treading the same path.</p>
</div></article></div><footer class="flex flex-col bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-50"><div class="mt-10"><ul class="flex flex-row justify-between max-w-sm mx-auto pl-4 pr-4"><li class="hover:text-gray-600 dark:hover:text-gray-100"><a href="https://twitter.com/KrishnaAnaril">Twitter</a></li><li><a href="https://krishnamohan.dev/sitemap-blog.xml">Sitemap</a></li><li><a href="https://krishnamohan.dev/feed.xml">RSS</a></li><li><a href="mailto:krishnamohan.a.m@gmail.com">Contact</a></li></ul></div><div class="mx-auto p-5 text-sm"><p>© 2021-present <a class="font-bold" href="https://krishnamohan.dev/">Krishna Mohan A M</a>. All Rights Reserved.</p></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"generating-code-coverage-reports-in-dotnet-core","meta":{"title":"Generating Code Coverage Reports in Dotnet Core","description":"Unlike other application frameworks .NET Core do not provide code coverage reports out of the box. Here I’ll be using a different approach which actually suited my web application. Without further ado, let’s get started.","published":true,"publishedAt":"2019-07-05T00:00:00.000Z","updatedAt":"2019-07-05T00:00:00.000Z","category":"tech","image":"banners/04","keywords":["dotnet"],"authors":["Krishna Mohan A M"]},"content":"\u003cp\u003eUnlike other application frameworks \u003cstrong\u003e.NET Core\u003c/strong\u003e do not provide code coverage reports out of the box, even the code coverage \u003ca href=\"https://github.com/microsoft/vstest/issues/981\"\u003esupport \u003c/a\u003ewas provided only in dotnet core version 2.1. But the ‘\u003cstrong\u003eCode Coverage Analysis\u003c/strong\u003e’ is provided with Visual Studio Enterprise edition. You can find more information \u003ca href=\"https://docs.microsoft.com/en-us/visualstudio/test/using-code-coverage-to-determine-how-much-code-is-being-tested?view=vs-2017\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eThat’s okay, we’ve other tools available to get the code coverage reports and here I’ll be briefly explaining about it. There is already a blog post about this \u003ca href=\"https://gunnarpeipman.com/aspnet/code-coverage/\"\u003etopic\u003c/a\u003e by \u003ca href=\"https://twitter.com/gpeipman\"\u003eGunnar Peipman\u003c/a\u003e. You can refer that as well. Here I’ll be using a different approach which actually suited my web application. Without further ado, let’s get started.\u003c/p\u003e\n\u003ch2\u003eContents\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003ePrerequisites\u003c/li\u003e\n\u003cli\u003eCreating dotnet application and adding test project\u003c/li\u003e\n\u003cli\u003eRunning tests with CLI\u003c/li\u003e\n\u003cli\u003eConvert *.coverage file to *.coveragexml file\u003c/li\u003e\n\u003cli\u003eGenerate Reports using ReportGenerator\u003c/li\u003e\n\u003cli\u003ePowershell script with all the steps\u003c/li\u003e\n\u003cli\u003eConclusion\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003ePrerequisites\u003c/h2\u003e\n\u003cp\u003eYou need to install/Configure:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eDotnet core version 2.1 or above.\u003c/li\u003e\n\u003cli\u003eVisual Studio 2017 or above / Visual studio code.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/danielpalme\"\u003eDaniel Palme\u003c/a\u003e’s \u003ca href=\"https://danielpalme.github.io/ReportGenerator/usage.html\"\u003eReportGenerator\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.nuget.org/packages/Microsoft.CodeCoverage/\"\u003eMicrosoft.CodeCoverage\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eCreating dotnet application and adding test project\u003c/h2\u003e\n\u003cp\u003eYou can make use of \u003cem\u003edotnet new\u003c/em\u003e command or Visual Studio templates for creating a new project and test project. Here I’ll be covering MSTest, you can try with another unit testing framework as well.\u003c/p\u003e\n\u003cp\u003eIf you’ve a dotnet core application with version 1.x, you can do the following steps to get the code coverage.\u003c/p\u003e\n\u003cp\u003e• Upgraded test related nuget refernces to latest version\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-xml\"\u003e\u003ccode class=\"language-xml\"\u003e\u0026#x3C;PackageReference Include=”Microsoft.NET.Test.Sdk” Version=”15.9.0\" /\u003e\n\u0026#x3C;PackageReference Include=”MSTest.TestAdapter” Version=”1.3.2\" /\u003e\n \u0026#x3C;PackageReference Include=”MSTest.TestFramework” Version=”1.3.2\" /\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e• Add the following config in *.csproj files. More information is available \u003ca href=\"https://github.com/Microsoft/vstest/issues/800\"\u003ehere.\u003c/a\u003e\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-xml\"\u003e\u003ccode class=\"language-xml\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eDebugType\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003eFull\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003eDebugType\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2\u003eRunning tests with CLI\u003c/h2\u003e\n\u003cp\u003eOnce we’ve created our application and added sufficient unit tests. We need to run these tests and get the code coverage info. You do so by running the following command.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003edotnet \u003cspan class=\"token builtin class-name\"\u003etest\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003ePath to *.csproj file\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e --results-directory:\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eTest Result directory\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e --collect:\u003cspan class=\"token string\"\u003e\"Code Coverage\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eBut I had a problem, dotnet was analyzing my dependent libraries as well. I was using \u003ca href=\"https://github.com/moq/moq\"\u003eMoq \u003c/a\u003efor mocking and \u003ca href=\"https://github.com/MisterJames/GenFu\"\u003eGenFu\u003c/a\u003e to generate random test data. So I had to exclude these dlls during the code coverage analysis by creating a \u003ca href=\"https://docs.microsoft.com/en-us/visualstudio/test/configure-unit-tests-by-using-a-dot-runsettings-file?view=vs-2019\"\u003erunsettings\u003c/a\u003e file and add the following configuration:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-xml\"\u003e\u003ccode class=\"language-xml\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eModulePaths\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e              \n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eExclude\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e                \n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eModulePath\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e.*Moq.dll\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003eModulePath\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eModulePath\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e.*GenFu.dll\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003eModulePath\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e                \n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003eExclude\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003eModulePaths\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eInclude and exclude nodes use regular expressions. More information is available \u003ca href=\"https://docs.microsoft.com/en-us/visualstudio/test/customizing-code-coverage-analysis?view=vs-2019#regular-expressions\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eNow we need to run *test *command using this .runsettings file.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003edotnet \u003cspan class=\"token builtin class-name\"\u003etest\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003ePath to .csproj file\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e --settings:\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003ePath to .runsettings file\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThis will generate *.coverage file inside a folder whose name corresponds to a GUID. Right now dotnet core CLI \u003ca href=\"https://github.com/microsoft/vstest/issues/1957#issue-420578504\"\u003edo not support\u003c/a\u003e custom name for *.coverage file.\u003c/p\u003e\n\u003ch2\u003eConvert *.coverage file to *.coveragexml file\u003c/h2\u003e\n\u003cp\u003e*CodeCoverage.exe *is a tool that comes with the installation of Visual Studio. To generate a coverage report with ReportGenerator the file has to be converted to xml format.\u003c/p\u003e\n\u003cp\u003eTo get the xml file you can use the following command:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-xml\"\u003e\u003ccode class=\"language-xml\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eUserProfile\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\\.nuget\\packages\\microsoft.codecoverage\\\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eversion\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\\build\\netstandard1.0\\CodeCoverage\\CodeCoverage.exe analyze  /output:\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003exml\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003efile\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ename\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ewith\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ePath\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e.coveragexml  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003epath\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eto\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ecoverage\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003efile\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\n# Eg: C:\\Users\\krishnamohan\\.nuget\\packages\\microsoft.codecoverage\\15.9.0\\build\\netstandard1.0\\CodeCoverage\\CodeCoverage.exe analyze  /output:d:\\MyTestOutput.coveragexml  d:\\SomeName.coverage\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2\u003eGenerate Reports using ReportGenerator\u003c/h2\u003e\n\u003cp\u003eWe need to run another command using the installed ReportGenerator.dll.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003edotnet \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eUserProfile\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003e.nuget\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003epackages\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003ereportgenerator\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eversion\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003etools\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003enetcoreapp2.1\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003eReportGenerator.dll \u003cspan class=\"token string\"\u003e\"-reports:\u0026#x3C;Coveragexml file path\u003e\"\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"-targetdir:\u0026#x3C;path to coverage report\u003e\"\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token comment\"\u003e#\u003c/span\u003e\nEg: dotnet C:\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003eUsers\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003ekrishnamohan\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003e.nuget\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003epackages\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003ereportgenerator\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003e\u003cspan class=\"token number\"\u003e4.1\u003c/span\u003e.10\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003etools\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003enetcoreapp2.1\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003eReportGenerator.dll \u003cspan class=\"token string\"\u003e\"-reports:d:\\MyTestOutput.coveragexml\"\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"-targetdir:d:\u003cspan title=\"\\c\" class=\"token entity\"\u003e\\c\u003c/span\u003eoveragereport\"\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e#\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThis will generate reports in *.htm format in the given output folder. If you open the index.htm file you can view the report.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"assets/images/03_01.png\" alt=\"Sample Report Image\"\u003e\u003cem\u003eSample Report Image. Source: https://github.com/danielpalme/ReportGenerator\u003c/em\u003e\u003c/p\u003e\n\u003ch2\u003ePowershell script with all the steps\u003c/h2\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-powershell\"\u003e\u003ccode class=\"language-powershell\"\u003e\u003cspan class=\"token keyword\"\u003eparam\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n   \u003cspan class=\"token namespace\"\u003e[Parameter(Mandatory=$true)]\u003c/span\u003e\n   \u003cspan class=\"token namespace\"\u003e[string]\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$testProjectPath\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n   \u003cspan class=\"token namespace\"\u003e[Parameter(Mandatory=$true)]\u003c/span\u003e\n   \u003cspan class=\"token namespace\"\u003e[string]\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$testSettingsPath\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n   \u003cspan class=\"token namespace\"\u003e[Parameter(Mandatory=$true)]\u003c/span\u003e\n   \u003cspan class=\"token namespace\"\u003e[string]\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$testResultsFolder\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e\u0026#x3C;#\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003eecho \"Test Project Path\" $testProjectPath\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003eecho \"Test Settings Path\" $testSettingsPath\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003eecho \"Test Results Folder\" $testResultsFolder\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e#\u003e\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003etry\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\n   \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-not\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token function\"\u003eTest-Path\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$testProjectPath\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \n   \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n       \u003cspan class=\"token keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"token namespace\"\u003e[System.IO.FileNotFoundException]\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e$testProjectPath\u003c/span\u003e not found.\"\u003c/span\u003e\n   \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n   \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-not\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token function\"\u003eTest-Path\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$testSettingsPath\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \n   \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n       \u003cspan class=\"token keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"token namespace\"\u003e[System.IO.FileNotFoundException]\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e$testSettingsPath\u003c/span\u003e not found.\"\u003c/span\u003e\n   \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n   \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-not\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token function\"\u003eTest-Path\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$testResultsFolder\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \n   \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n       \u003cspan class=\"token keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"token namespace\"\u003e[System.IO.FileNotFoundException]\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e$testResultsFolder\u003c/span\u003e not found.\"\u003c/span\u003e\n   \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n   dotnet test \u003cspan class=\"token variable\"\u003e$testProjectPath\u003c/span\u003e \u003cspan class=\"token operator\"\u003e--\u003c/span\u003esettings:\u003cspan class=\"token variable\"\u003e$testSettingsPath\u003c/span\u003e \n   \u003cspan class=\"token variable\"\u003e$recentCoverageFile\u003c/span\u003e = \u003cspan class=\"token function\"\u003eGet-ChildItem\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eFile \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eFilter\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ecoverage \u003cspan class=\"token operator\"\u003e-\u003c/span\u003ePath \u003cspan class=\"token variable\"\u003e$testResultsFolder\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eName \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eRecurse \u003cspan class=\"token punctuation\"\u003e|\u003c/span\u003e \u003cspan class=\"token function\"\u003eSelect-Object\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eFirst 1\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n   \u003cspan class=\"token function\"\u003ewrite-host\u003c/span\u003e \u003cspan class=\"token string\"\u003e'Test Completed'\u003c/span\u003e  \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eForegroundColor Green\n\n   C:\\Users\\krishnamohan\\\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003enuget\\packages\\microsoft\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ecodecoverage\\15\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e9\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e0\\build\\netstandard1\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e0\\CodeCoverage\\CodeCoverage\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eexe analyze  \u003cspan class=\"token operator\"\u003e/\u003c/span\u003eoutput:\u003cspan class=\"token variable\"\u003e$testResultsFolder\u003c/span\u003e\\MyTestOutput\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ecoveragexml  \u003cspan class=\"token variable\"\u003e$testResultsFolder\u003c/span\u003e\u003cspan class=\"token string\"\u003e'\\'\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$recentCoverageFile\u003c/span\u003e\n   \u003cspan class=\"token function\"\u003ewrite-host\u003c/span\u003e \u003cspan class=\"token string\"\u003e'CoverageXML Generated'\u003c/span\u003e  \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eForegroundColor Green\n\n   dotnet C:\\Users\\krishnamohan\\\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003enuget\\packages\\reportgenerator\\4\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e1\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e10\\tools\\netcoreapp2\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e1\\ReportGenerator\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edll \u003cspan class=\"token string\"\u003e\"-reports:\u003cspan class=\"token variable\"\u003e$testResultsFolder\u003c/span\u003e\\MyTestOutput.coveragexml\"\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"-targetdir:\u003cspan class=\"token variable\"\u003e$testResultsFolder\u003c/span\u003e\\coveragereport\"\u003c/span\u003e\n   \u003cspan class=\"token function\"\u003ewrite-host\u003c/span\u003e \u003cspan class=\"token string\"\u003e'CoverageReport Published'\u003c/span\u003e  \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eForegroundColor Green\n\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003ecatch\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\n   \u003cspan class=\"token function\"\u003ewrite-host\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Caught an exception:\"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eForegroundColor Red\n   \u003cspan class=\"token function\"\u003ewrite-host\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Exception Type: \u003cspan class=\"token function\"\u003e$\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$_\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eException\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eGetType\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e.FullName)\"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eForegroundColor Red\n   \u003cspan class=\"token function\"\u003ewrite-host\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Exception Message: \u003cspan class=\"token function\"\u003e$\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$_\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eException\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eMessage\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003eForegroundColor Red\n\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eIt took some time for me to figure it out as lot of information regarding this was scattered all over the internet. Finally it was worth the effort and coverage reports really improve quality of unit tests and helps developer to write better unit tests. Hope this blog post will be helpful for dotnet developers treading the same path.\u003c/p\u003e\n"},"__N_SSG":true},"page":"/blogs/[id]","query":{"id":"generating-code-coverage-reports-in-dotnet-core"},"buildId":"PzvC_6guoYsxVyzDyIKoc","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>