<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Embedding Power BI in Angular — Part 2</title><meta name="next-head-count" content="3"/><link href="https://unpkg.com/prism-themes@1.6.0/themes/prism-shades-of-purple.css" rel="stylesheet"/><link rel="preload" href="/_next/static/css/4a97783a49a372e8.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4a97783a49a372e8.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/_next/static/chunks/main-7f42b959b0669217.js" defer=""></script><script src="/_next/static/chunks/pages/_app-3893aca8cac41098.js" defer=""></script><script src="/_next/static/chunks/424-3594905cf020c7f0.js" defer=""></script><script src="/_next/static/chunks/pages/blogs/%5Bid%5D-c2a93926e52c49e7.js" defer=""></script><script src="/_next/static/7yIxxxIoz6HXMqE6fqbNa/_buildManifest.js" defer=""></script><script src="/_next/static/7yIxxxIoz6HXMqE6fqbNa/_ssgManifest.js" defer=""></script></head><body class="bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-50"><div id="__next"><div><div class="bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-50"><section class="hidden lg:flex flex-row justify-center"><nav><ul class="lg:text-xl lg:flex lg:flex-row"><li class="p-3 cursor-pointer"><a href="/">Home</a></li><li class="p-3 cursor-pointer border-b-2 border-gray-700 dark:border-gray-300"><a href="/blogs">Blog</a></li><li class="p-3 cursor-pointer"><a href="/projects">Projects</a></li><li class="p-3 cursor-pointer"><a href="/about">About</a></li></ul></nav></section><div class="absolute lg:hidden mr-4 p-4 right-0"><button class="p-2" aria-label="view menu items"><svg class="fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black" width="24px" height="24px"><path d="M0 0h24v24H0z" fill="none"></path><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></button></div></div><div class="min-h-screen"><article class="bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-50"><div><div aria-label="Blog tags/keywords" class="pt-8 flex flex-row justify-center"><div class="bg-gray-300 dark:bg-gray-700 border border-gray-400 ml-2 mr-2 pb-2 pl-4 pr-4 pt-2 text-sm align-baseline rounded-full">powerbi</div><div class="bg-gray-300 dark:bg-gray-700 border border-gray-400 ml-2 mr-2 pb-2 pl-4 pr-4 pt-2 text-sm align-baseline rounded-full">angular</div></div><div class="max-w-screen-lg mx-auto"><h1 class="text-5xl pt-5 pb-5 text-center">Embedding Power BI in Angular — Part 2</h1></div><div class="flex flex-row justify-center m-5 max-w-screen-sm mx-auto"><time class="text-center text-xl">16 October 2018</time></div></div><div class="prose dark:prose-invert lg:prose-xl max-w-screen-md mx-auto"><p>Power BI can be embedded for the users of your organization who have access to it. This requires the users to sign-in to their Power BI account to view their content, which are the reports they own or the ones that have been shared with them.</p>
<p>This is the second part of the two-part article series. You can find the first one <a href="https://krishnamohan.dev/blog/embedding-power-bi-in-angular-part-1">here</a>.</p>
<h2>Embedding for your organization</h2>
<p>Creating dashboards/reports using Power BI are out of scope of this article, you can learn more about it <a href="https://docs.microsoft.com/en-us/power-bi/service-get-started">here</a>. I’ve skipped a lot a details which have better documentation elsewhere.</p>
<h3>Contents</h3>
<ul>
<li>Prerequisite</li>
<li>Overview</li>
<li>Set up your embedded analytics development environment</li>
<li>Set up your Power BI environment</li>
<li>Create Angular client</li>
<li>Conclusion</li>
</ul>
<h3>Prerequisites</h3>
<ul>
<li><a href="https://powerbi.microsoft.com/en-us/pricing/">Power BI pro account</a></li>
<li><a href="https://azure.microsoft.com/en-us/free/">Microsoft Azure Subscription</a></li>
<li><a href="https://docs.microsoft.com/en-us/power-bi/developer/create-an-azure-active-directory-tenant">Azure Active Directory Tenant</a> Setup. If it is already done for your organization, you can find it <a href="https://www.whatismytenantid.com/">here</a>.</li>
<li>Visual Studio Code</li>
<li>npm, node, angular-cli</li>
</ul>
<h3>Overview</h3>
<p>A high level diagram showing how this works is shown below.</p>
<p><img src="assets/images/02_01.png" alt=""></p>
<p>The workflow is as follows.</p>
<ol>
<li>When user browses UI, he/she is asked to login with his/her power bi credentials.</li>
<li>User credentials are validated with Azure AD to generate access tokens.</li>
<li>UI calls Power BI API to get the report specific data with the token.</li>
<li>Power BI API returns report data, and UI displays it in the web page.</li>
</ol>
<h3>Set up your embedded analytics development environment</h3>
<p>Refer [this](http://When user browses UI, he/she is asked to login with his/her power bi credentials. User credentials are validated with Azure AD to generate access tokens UI calls Power BI API to get the report specific data with the token. Power BI API returns report data, and UI displays it in the web page.) for more details.</p>
<p>Here we need to do few more steps than what is mentioned in the documentation.</p>
<ol>
<li>Redirect URL should be the URL in the application that should be displayed post user authentication.</li>
<li>Set the key ‘oauth2AllowImplicitFlow’ in Azure Active Directory app manifest to true as we are using browser based clients.</li>
</ol>
<h3>Set up your Power BI environment</h3>
<p>Read <a href="https://docs.microsoft.com/en-us/power-bi/developer/embed-sample-for-your-organization#set-up-your-power-bi-environment">this</a> for more details.</p>
<h3>Create Angular client</h3>
<p>Our application should authenticate user to Azure Active Directory (AD) and generate the access token. This access token is used as the <a href="https://oauth.net/2/bearer-tokens/">bearer </a>token for subsequent Power BI API requests.</p>
<p>For authenticating with Azure AD, we’ll be using <a href="https://github.com/AzureAD/azure-activedirectory-library-for-js">this</a> library. You can add this to your angular project by running the following command.</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> adal-angular
</code></pre></div>
<p>In the HTML page, create a ‘div’ with id ‘embedReport’. We’ll be showing report in this div. Embedding in div is done using Power BI JavaScript <a href="https://github.com/Microsoft/PowerBI-JavaScript">library</a>. You can add it to your angular application by running the following command.</p>
<div class="remark-highlight"><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> powerbi-client
</code></pre></div>
<p>Now we’ve added the additional libraries for your requirement and can we start coding the the authentication service as follows.</p>
<p><img src="assets/images/02_02.png" alt="">
<em>Gist: https://gist.github.com/krishnaanaril/9a07c99efe7db86b8ede17d4177be303</em></p>
<p>We can store ‘adal’ related configuration in the environment.ts file. I’ve attached the sample format below.</p>
<p><img src="assets/images/02_03.png" alt="">
<em>Gist: https://gist.github.com/krishnaanaril/b1b8798373a6bbe42e7f288ceb9ca1a9</em></p>
<p>Once the user is authenticated, to handle callback you need to add the following code in the redirect component’s ngOnInit method.</p>
<p><img src="assets/images/02_04.png" alt=""></p>
<p>Here I’ve written the code to embed the first of the available reports to a user. You can update it to suit your needs. First we need to get the access token and get the first of the available reports. The code is as follows.</p>
<p><img src="assets/images/02_05.png" alt="">
<em>Gist: https://gist.github.com/krishnaanaril/398f8e51136e649bf35e41baf8367efe</em></p>
<p>The method ‘getReportsInGroup’ will be invoking the corresponding Power BI REST API.</p>
<p><img src="assets/images/02_06.png" alt="">
<em>Gist: https://gist.github.com/krishnaanaril/427e4ef6b171fa109787617b3c0e6953</em></p>
<p>Next, we need to embed the report in the HTML page. This is similar to ‘Embed for your customers’, except the token type which is ‘Aad’ and access token instead of embed token. Embedding report code is as follows.</p>
<p><img src="assets/images/02_06.png" alt="Embedding report for your organization">
<em>Embedding report for your organization</em></p>
<h3>Conclusion</h3>
<p>Now you’re done with your Angular app, run it and verify the reports. Dashboards and Tiles can be embedded in a similar way. You can find those snippets here.</p>
<ul>
<li><a href="https://gist.github.com/krishnaanaril/1392403aa328684738e4ed6f0b8a664f">Dashboard</a></li>
<li><a href="https://gist.github.com/krishnaanaril/211f5b390a5e7e038b7a67dfe387fb29">Tile</a></li>
</ul>
</div></article></div><footer class="flex flex-col bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-50"><div class="mt-10"><ul class="flex flex-row justify-between max-w-sm mx-auto pl-4 pr-4"><li class="hover:text-gray-600 dark:hover:text-gray-100"><a href="https://twitter.com/KrishnaAnaril">Twitter</a></li><li><a href="https://krishnamohan.dev/sitemap-blog.xml">Sitemap</a></li><li><a href="https://krishnamohan.dev/feed.xml">RSS</a></li><li><a href="mailto:krishnamohan.a.m@gmail.com">Contact</a></li></ul></div><div class="mx-auto p-5 text-sm"><p>© 2021-present <a class="font-bold" href="https://krishnamohan.dev/">Krishna Mohan A M</a>. All Rights Reserved.</p></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"embedding-powerbi-in-angular-part-2","meta":{"title":"Embedding Power BI in Angular — Part 2","description":"Power BI can be embedded for the users of your organization who have access to it. This requires the users to sign-in to their Power BI account to view their content, which are the reports they own or the ones that have been shared with them. This is the second part of the two-part article series.","published":true,"publishedAt":"2018-10-16T00:00:00.000Z","updatedAt":"2018-10-16T00:00:00.000Z","category":"tech","image":"banners/02","keywords":["powerbi","angular"],"authors":["Krishna Mohan A M"]},"content":"\u003cp\u003ePower BI can be embedded for the users of your organization who have access to it. This requires the users to sign-in to their Power BI account to view their content, which are the reports they own or the ones that have been shared with them.\u003c/p\u003e\n\u003cp\u003eThis is the second part of the two-part article series. You can find the first one \u003ca href=\"https://krishnamohan.dev/blog/embedding-power-bi-in-angular-part-1\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\n\u003ch2\u003eEmbedding for your organization\u003c/h2\u003e\n\u003cp\u003eCreating dashboards/reports using Power BI are out of scope of this article, you can learn more about it \u003ca href=\"https://docs.microsoft.com/en-us/power-bi/service-get-started\"\u003ehere\u003c/a\u003e. I’ve skipped a lot a details which have better documentation elsewhere.\u003c/p\u003e\n\u003ch3\u003eContents\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003ePrerequisite\u003c/li\u003e\n\u003cli\u003eOverview\u003c/li\u003e\n\u003cli\u003eSet up your embedded analytics development environment\u003c/li\u003e\n\u003cli\u003eSet up your Power BI environment\u003c/li\u003e\n\u003cli\u003eCreate Angular client\u003c/li\u003e\n\u003cli\u003eConclusion\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003ePrerequisites\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://powerbi.microsoft.com/en-us/pricing/\"\u003ePower BI pro account\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://azure.microsoft.com/en-us/free/\"\u003eMicrosoft Azure Subscription\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.microsoft.com/en-us/power-bi/developer/create-an-azure-active-directory-tenant\"\u003eAzure Active Directory Tenant\u003c/a\u003e Setup. If it is already done for your organization, you can find it \u003ca href=\"https://www.whatismytenantid.com/\"\u003ehere\u003c/a\u003e.\u003c/li\u003e\n\u003cli\u003eVisual Studio Code\u003c/li\u003e\n\u003cli\u003enpm, node, angular-cli\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eOverview\u003c/h3\u003e\n\u003cp\u003eA high level diagram showing how this works is shown below.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"assets/images/02_01.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eThe workflow is as follows.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eWhen user browses UI, he/she is asked to login with his/her power bi credentials.\u003c/li\u003e\n\u003cli\u003eUser credentials are validated with Azure AD to generate access tokens.\u003c/li\u003e\n\u003cli\u003eUI calls Power BI API to get the report specific data with the token.\u003c/li\u003e\n\u003cli\u003ePower BI API returns report data, and UI displays it in the web page.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3\u003eSet up your embedded analytics development environment\u003c/h3\u003e\n\u003cp\u003eRefer [this](http://When user browses UI, he/she is asked to login with his/her power bi credentials. User credentials are validated with Azure AD to generate access tokens UI calls Power BI API to get the report specific data with the token. Power BI API returns report data, and UI displays it in the web page.) for more details.\u003c/p\u003e\n\u003cp\u003eHere we need to do few more steps than what is mentioned in the documentation.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eRedirect URL should be the URL in the application that should be displayed post user authentication.\u003c/li\u003e\n\u003cli\u003eSet the key ‘oauth2AllowImplicitFlow’ in Azure Active Directory app manifest to true as we are using browser based clients.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3\u003eSet up your Power BI environment\u003c/h3\u003e\n\u003cp\u003eRead \u003ca href=\"https://docs.microsoft.com/en-us/power-bi/developer/embed-sample-for-your-organization#set-up-your-power-bi-environment\"\u003ethis\u003c/a\u003e for more details.\u003c/p\u003e\n\u003ch3\u003eCreate Angular client\u003c/h3\u003e\n\u003cp\u003eOur application should authenticate user to Azure Active Directory (AD) and generate the access token. This access token is used as the \u003ca href=\"https://oauth.net/2/bearer-tokens/\"\u003ebearer \u003c/a\u003etoken for subsequent Power BI API requests.\u003c/p\u003e\n\u003cp\u003eFor authenticating with Azure AD, we’ll be using \u003ca href=\"https://github.com/AzureAD/azure-activedirectory-library-for-js\"\u003ethis\u003c/a\u003e library. You can add this to your angular project by running the following command.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token function\"\u003enpm\u003c/span\u003e \u003cspan class=\"token function\"\u003einstall\u003c/span\u003e adal-angular\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eIn the HTML page, create a ‘div’ with id ‘embedReport’. We’ll be showing report in this div. Embedding in div is done using Power BI JavaScript \u003ca href=\"https://github.com/Microsoft/PowerBI-JavaScript\"\u003elibrary\u003c/a\u003e. You can add it to your angular application by running the following command.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"token function\"\u003enpm\u003c/span\u003e \u003cspan class=\"token function\"\u003einstall\u003c/span\u003e \u003cspan class=\"token parameter variable\"\u003e--save\u003c/span\u003e powerbi-client\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eNow we’ve added the additional libraries for your requirement and can we start coding the the authentication service as follows.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"assets/images/02_02.png\" alt=\"\"\u003e\r\n\u003cem\u003eGist: https://gist.github.com/krishnaanaril/9a07c99efe7db86b8ede17d4177be303\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eWe can store ‘adal’ related configuration in the environment.ts file. I’ve attached the sample format below.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"assets/images/02_03.png\" alt=\"\"\u003e\r\n\u003cem\u003eGist: https://gist.github.com/krishnaanaril/b1b8798373a6bbe42e7f288ceb9ca1a9\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eOnce the user is authenticated, to handle callback you need to add the following code in the redirect component’s ngOnInit method.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"assets/images/02_04.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eHere I’ve written the code to embed the first of the available reports to a user. You can update it to suit your needs. First we need to get the access token and get the first of the available reports. The code is as follows.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"assets/images/02_05.png\" alt=\"\"\u003e\r\n\u003cem\u003eGist: https://gist.github.com/krishnaanaril/398f8e51136e649bf35e41baf8367efe\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eThe method ‘getReportsInGroup’ will be invoking the corresponding Power BI REST API.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"assets/images/02_06.png\" alt=\"\"\u003e\r\n\u003cem\u003eGist: https://gist.github.com/krishnaanaril/427e4ef6b171fa109787617b3c0e6953\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eNext, we need to embed the report in the HTML page. This is similar to ‘Embed for your customers’, except the token type which is ‘Aad’ and access token instead of embed token. Embedding report code is as follows.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"assets/images/02_06.png\" alt=\"Embedding report for your organization\"\u003e\r\n\u003cem\u003eEmbedding report for your organization\u003c/em\u003e\u003c/p\u003e\n\u003ch3\u003eConclusion\u003c/h3\u003e\n\u003cp\u003eNow you’re done with your Angular app, run it and verify the reports. Dashboards and Tiles can be embedded in a similar way. You can find those snippets here.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://gist.github.com/krishnaanaril/1392403aa328684738e4ed6f0b8a664f\"\u003eDashboard\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://gist.github.com/krishnaanaril/211f5b390a5e7e038b7a67dfe387fb29\"\u003eTile\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n"},"__N_SSG":true},"page":"/blogs/[id]","query":{"id":"embedding-powerbi-in-angular-part-2"},"buildId":"7yIxxxIoz6HXMqE6fqbNa","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>